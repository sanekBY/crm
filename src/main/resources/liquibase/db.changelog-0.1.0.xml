<databaseChangeLog xmlns='http://www.liquibase.org/xml/ns/dbchangelog'
                   xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
                   xsi:schemaLocation='http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd'>
    <changeSet id="ADD_USERS" author="shalukho">
        <createTable tableName="USER">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"
                             primaryKeyName="USERPK"/>
            </column>
            <column name="LOGIN" type="varchar(255)"></column>
            <column name="PASSWORD" type="varchar(255)"/>
            <column name="FIRST_NAME" type="varchar(255)"/>
            <column name="LAST_NAME" type="varchar(255)"/>
            <column name="ROLE" type="enum('ADMIN', 'USER')"/>
            <column defaultValueNumeric="1" name="ACTIVE" type="TINYINT(2)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <insert tableName="USER">
            <column name="LOGIN">admin</column>
            <column name="PASSWORD">$2a$10$o.kTyW1HS97I4CiS1uoTo./np2fqhpf0iCdNGkYXFgtjMR8N1xoTy</column>
            <column name="FIRST_NAME">Alex</column>
            <column name="LAST_NAME">Shalukho</column>
            <column name="ROLE">ADMIN</column>
        </insert>
        <addUniqueConstraint columnNames="LOGIN" constraintName="UK_LOGIN" tableName="USER"/>
    </changeSet>
    <changeSet id="ADD_PERSON_AND_COMPANY" author="shalukho">
        <createTable tableName="PERSON">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"
                             primaryKeyName="PERSONPK"/>
            </column>
            <column defaultValueNumeric="1" name="ACTIVE" type="TINYINT(2)">
                <constraints nullable="false"/>
            </column>
            <column name="PHONE" type="varchar(255)"/>
            <column name="EMAIL" type="varchar(255)"/>
            <column name="ADDRESS" type="varchar(255)"/>
            <column name="NAME" type="varchar(255)"/>
            <column name="PHONE_TYPE" type="enum('MOBILE', 'WORK', 'HOME')"/>
        </createTable>
        <createTable tableName="COMPANY">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"
                             primaryKeyName="COMPANYPK"/>
            </column>
            <column defaultValueNumeric="1" name="ACTIVE" type="TINYINT(2)">
                <constraints nullable="false"/>
            </column>
            <column name="PHONE" type="varchar(255)"/>
            <column name="EMAIL" type="varchar(255)"/>
            <column name="ADDRESS" type="varchar(255)"/>
            <column name="NAME" type="varchar(255)"/>
            <column name="PHONE_TYPE" type="enum('MOBILE', 'WORK', 'HOME')"/>
        </createTable>
    </changeSet>
    <changeSet id="ADD_ITEMS" author="shalukho">
        <createTable tableName="ITEM_TYPE">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"
                             primaryKeyName="ITEM_TYPEPK"/>
            </column>
            <column defaultValueNumeric="1" name="ACTIVE" type="TINYINT(2)">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="varchar(255)"/>
        </createTable>
        <createTable tableName="ITEM_TYPE_PROPERTY">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"
                             primaryKeyName="ITEM_TYPE_PROPERTYPK"/>
            </column>
            <column defaultValueNumeric="1" name="ACTIVE" type="TINYINT(2)">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="varchar(255)"/>
        </createTable>
        <createTable tableName="ITEM">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"
                             primaryKeyName="ITEMPK"/>
            </column>
            <column defaultValueNumeric="1" name="ACTIVE" type="TINYINT(2)">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="varchar(255)"/>
            <column name="DESCRIPTION" type="varchar(255)"/>
            <column name="PRICE" type="decimal">
                <constraints nullable="false"/>
            </column>
            <column name="ITEM_TYPE_ID" type="BIGINT">
                <constraints references="ITEM_TYPE(ID)"
                             foreignKeyName="FK_ITEM__ITEM_TYPE_ID" nullable="false"/>
            </column>
        </createTable>
        <createTable tableName="ITEM_TYPE_ITEM_TYPE_PROPERTY">
            <column autoIncrement="true" name="ID" type="BIGINT">
                <constraints primaryKey="true"
                             primaryKeyName="ITEM_TYPE_ITPPK"/>
            </column>
            <column name="ITEM_TYPE_ID" type="BIGINT">
                <constraints references="ITEM_TYPE(ID)"
                             foreignKeyName="FK_ITITP__ITEM_TYPE_ID" nullable="false"/>
            </column>
            <column name="ITEM_TYPE_PROPERTY_ID" type="BIGINT">
                <constraints references="ITEM_TYPE_PROPERTY(ID)"
                             foreignKeyName="FK_ITITP__ITEM_TYPE_PROPERTY_ID" nullable="false"/>
            </column>
        </createTable>
    </changeSet>
</databaseChangeLog>